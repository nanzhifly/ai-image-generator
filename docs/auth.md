# API 认证中间件设计

## 功能需求
1. API 密钥验证
   - 检查密钥是否存在
   - 验证密钥格式 (sk-开头)
   - 验证请求头中的密钥

2. 环境处理
   - 测试环境：简化验证流程
   - 生产环境：完整验证流程

3. 错误处理
   - 密钥不存在：401 + 明确提示
   - 格式错误：401 + 格式说明
   - 验证失败：401 + 安全提示

## 测试用例
1. 测试环境
   - ✓ 跳过实际验证
   - ✓ 允许测试密钥

2. 生产环境
   - ✓ 验证密钥存在
   - ✓ 验证密钥格式
   - ✓ 验证请求头 